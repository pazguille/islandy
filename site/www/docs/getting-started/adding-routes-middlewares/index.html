<!DOCTYPE html><html lang="es-AR"><head>
        <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, viewport-fit=cover"><link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèùÔ∏è</text></svg>"><title>Islandy Demo</title><link rel="stylesheet" href="/src/styles.css">
      </head>
      <body>
        <header><h1>üèùÔ∏è Islandy</h1></header><main><nav><ul><li><h3><a href="/docs/introduction">Introduction</a></h3></li><li><h3><a href="/docs/getting-started">Getting Started</a></h3><ul><li><a href="/docs/getting-started/create-a-project">Create a project</a></li><li><a href="/docs/getting-started/running-locally">Running locally</a></li><li><a href="/docs/getting-started/create-a-route">Create a route</a></li><li><a href="/docs/getting-started/dynamic-routes">Dynamic routes</a></li><li><a href="/docs/getting-started/adding-routes-middlewares">Adding routes middlewares</a></li><li><a href="/docs/getting-started/fetching-data">Fetching data</a></li><li><a href="/docs/getting-started/adding-island-of-interactivity">Adding islands of interactivity</a></li></ul></li></ul></nav><div><h3>Adding routes middlewares</h3><div><p>Add middlewares to a route to customize HTTP headers, implement API routes, do data fetching for a rendered page, or handle form submissions.</p>
<p>Routes actually consist of two parts: middlewares, and the page component.</p>
<p>Middleware are functions that have access to the request object (req), the response object (res), and the next function in the application‚Äôs request-response cycle. The next function is a function in the Express router which, when invoked, executes the middleware succeeding the current middleware.</p>
<p>Middleware functions can perform the following tasks:</p>
<ul>
<li>Execute any code.</li>
<li>Make changes to the request and the response objects.</li>
<li>End the request-response cycle.</li>
<li>Call the next middleware in the stack.</li>
</ul>
<p>By default, all routes that don't define a middleware just renders the page component.</p>
<p>Middlewares can have two forms: a function named by the HTTP method it handles or an array where each value is a function for all HTTP request methods.</p>
<p>To define a middleware in a route module, one must export it as a named export with
the name:</p>
<ul>
<li><code>get</code>, <code>post</code>, <code>put</code>, <code>delete</code></li>
<li><code>middlewares</code></li>
</ul>
<p>Here is an example of a custom <code>get</code> handler that renders the page component and
then adds a custom header to the response before returning it:</p>
<pre><code class="language-js">// routes/about.js

export function get(req, res, next) {
  res.setHeader();
  next();
};

export default function About() {
  return (
    &lt;main&gt;
      &lt;h1&gt;About&lt;/h1&gt;
      &lt;p&gt;This is the about page.&lt;/p&gt;
    &lt;/main&gt;
  );
}
</code></pre>
<p>Here is an example of a custom <code>middlewares</code> handler that renders the error page component and
log a the error before returning it:</p>
<pre><code class="language-js">// routes/500.js

export const middlewares = [
  (err, req, res, next) =&gt; {
    console.error(err);
    next(err);
  }
];

export default function Error500() {
  return (
    &lt;main&gt;
      &lt;h1&gt;OOPS!&lt;/h1&gt;
      &lt;p&gt;This is the error page.&lt;/p&gt;
    &lt;/main&gt;
  );
};
</code></pre>
</div></div></main>
        <script>
          window.addEventListener('load', () => {
            if (document.querySelector('p-island')) {
              import('/_islandy/boot.js');
            }
          });
        </script>
      
    
  </body></html>