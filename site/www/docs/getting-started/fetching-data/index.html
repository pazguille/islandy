<!DOCTYPE html><html lang="es-AR"><head>
        <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0, viewport-fit=cover"><link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🏝️</text></svg>"><title>Islandy Demo</title><link rel="stylesheet" href="/src/styles.css">
      </head>
      <body>
        <header><h1>🏝️ Islandy</h1></header><main><nav><ul><li><h3><a href="/docs/introduction">Introduction</a></h3></li><li><h3><a href="/docs/getting-started">Getting Started</a></h3><ul><li><a href="/docs/getting-started/create-a-project">Create a project</a></li><li><a href="/docs/getting-started/running-locally">Running locally</a></li><li><a href="/docs/getting-started/create-a-route">Create a route</a></li><li><a href="/docs/getting-started/dynamic-routes">Dynamic routes</a></li><li><a href="/docs/getting-started/adding-routes-middlewares">Adding routes middlewares</a></li><li><a href="/docs/getting-started/fetching-data">Fetching data</a></li><li><a href="/docs/getting-started/adding-island-of-interactivity">Adding islands of interactivity</a></li></ul></li></ul></nav><div><h3>Fetching data</h3><div><p>You can use the <code>fetch</code> function to fetch data for routes dynamically by creating a <code>get</code> middleware and passing data to <code>res.locals</code>.</p>
<p>The data that is passed to <code>res.locals</code> can then be accessed via the <code>props</code> field on the page component.</p>
<p>Here is an example of a route that fetches user data from the GitHub API and renders it in a page component.</p>
<pre><code class="language-js">// routes/github/[username].js

export async function get(req, res, next) {
  const { username } = req.params;

  // fetch just works!
  const data = await fetch(`https://api.github.com/users/${username}`);
  if (data.status !== 404) {
    const user = await data.json();
    res.locals = { user };
  }

  next();
};

export default function Page(props) {
  const { user } = props;

  if (!user) {
    return &lt;h1&gt;User not found&lt;/h1&gt;;
  }

  return (
    &lt;div&gt;
      &lt;img src={user.avatar_url} width={64} height={64} /&gt;
      &lt;h1&gt;{user.name}&lt;/h1&gt;
      &lt;p&gt;{user.login}&lt;/p&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>The <code>fetch</code> function is globaly available via <a href="https://www.npmjs.com/package/isomorphic-unfetch">isomorphic-unfetch</a> module.</p>
</div></div></main>
        <script>
          window.addEventListener('load', () => {
            if (document.querySelector('p-island')) {
              import('/_islandy/boot.js');
            }
          });
        </script>
      
    
  </body></html>